import{Node as o,mergeAttributes as u}from"@tiptap/core";var s=o.create({name:"mention",addOptions(){return{HTMLAttributes:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},type:{default:"mention",parseHTML:e=>e.getAttribute("data-type"),renderHTML:e=>({"data-type":e.type||"mention"})}}},parseHTML(){return[{tag:'span[data-type="mention"]'}]},renderHTML({node:e,HTMLAttributes:t}){return["span",u({class:"mention","data-type":"mention"},this.options.HTMLAttributes,t),`@${t["data-label"]||""}`]},renderText({node:e}){return`@${e.attrs.label||""}`},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let r=!1,{selection:i}=t,{empty:l,anchor:n}=i;return l?(t.doc.nodesBetween(n-1,n,(a,d)=>{if(a.type.name===this.name)return r=!0,e.insertText("",d,d+a.nodeSize),!1}),r):!1})}}}),m=s;export{s as Mention,m as default};
